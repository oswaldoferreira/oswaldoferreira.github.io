<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
<title type="text">Developer's Brainstorming</title>
<generator uri="https://github.com/jekyll/jekyll">Jekyll</generator>
<link rel="self" type="application/atom+xml" href="http://oswaldoferreira.github.io/feed.xml" />
<link rel="alternate" type="text/html" href="http://oswaldoferreira.github.io" />
<updated>2014-05-26T22:56:38-04:00</updated>
<id>http://oswaldoferreira.github.io/</id>
<author>
  <name>Oswaldo Ferreira</name>
  <uri>http://oswaldoferreira.github.io/</uri>
  <email>oswluizf@gmail.com</email>
</author>


<entry>
  <title type="html"><![CDATA[Melhorando seu workflow no Rails com Spring]]></title>
  <link rel="alternate" type="text/html" href="http://oswaldoferreira.github.io/2014/05/26/melhorando-workflow-com-spring.html" />
  <id>http://oswaldoferreira.github.io/2014/05/26/melhorando-workflow-com-spring</id>
  <updated>2014-05-26 18:30:34 -0400T00:00:00-00:00</updated>
  <published>2014-05-26T00:00:00-04:00</published>
  
  <author>
    <name>Oswaldo Ferreira</name>
    <uri>http://oswaldoferreira.github.io</uri>
    <email>oswluizf@gmail.com</email>
  </author>
  <content type="html">&lt;p&gt;Dia 18/04 foi lançada a tão esperada versão 4.1 do Rails. Nessa release
houveram grandes mudanças e features para tornar ainda mais eficiente
nosso workflow, sem falar no aumento de segurança da framework. Uma das features
introduzidas foi o &lt;strong&gt;Spring&lt;/strong&gt;, uma ferramenta booter que recebeu melhorias e
agora se torna built-in no Rails 4.1.&lt;/p&gt;

&lt;h2 id=&quot;spring&quot;&gt;Spring&lt;/h2&gt;

&lt;p&gt;O spring é um preloader atualmente nativo que basicamente inicia sua aplicação
em background, tornando extremamente mais rápida qualquer ação que inicie o
ambiente de desenvolvimento do Rails, como specs, rake tasks e migrations.&lt;/p&gt;

&lt;h3 id=&quot;na-prtica&quot;&gt;Na prática:&lt;/h3&gt;

&lt;p&gt;Inicializando uma pequena spec suite, temos os seguintes resultados sem a utlização do &lt;strong&gt;spring&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;  &lt;span class=&quot;nb&quot;&gt;time &lt;/span&gt;rspec spec/models/.
  ..

  Finished in 14.38 seconds
  520 examples, 0 failures

  18,38s user 2,11s system 94% cpu 21,742 total
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h4 id=&quot;total-2174&quot;&gt;Total: 21,74&lt;/h4&gt;

&lt;p&gt;São &lt;strong&gt;21.74&lt;/strong&gt; segundos no total e &lt;strong&gt;14.38&lt;/strong&gt; segundos rodando os testes,
o que nos dá &lt;strong&gt;7.36 segundos de booting, esperando o teste começar a ser executado&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Lembrando que este tempo irá variar pelo tamanho da aplicação, quantidade de
gems e máquina utilizada.&lt;/p&gt;

&lt;p&gt;Após a execução do primeiro comando utilizando &lt;em&gt;spring&lt;/em&gt;, sua aplicação já estará
rodando em background, portanto a execução do primeiro comando será lenta,
como no exemplo acima. A partir da segunda execução já podemos ver os resultados:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;  &lt;span class=&quot;nb&quot;&gt;time &lt;/span&gt;spring rspec spec/models/.
  ..

  Finished in 16.03 seconds
  520 examples, 0 failures, 1 pending

  0,08s user 0,02s system 0% cpu 17,728 total
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h4 id=&quot;total-1773&quot;&gt;Total: 17,73&lt;/h4&gt;

&lt;p&gt;Como podemos ver, ganhamos aproximadamente &lt;strong&gt;4 segundos&lt;/strong&gt;, o que pode ser uma
grande diferença para equipes que praticam TDD ou executam testes com grande frequência.&lt;/p&gt;

&lt;h3 id=&quot;conselhos--pitfalls&quot;&gt;Conselhos &amp;amp; Pitfalls&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Setup rápido no &lt;a href=&quot;https://github.com/rails/spring/blob/master/README.md&quot;&gt;readme&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Você pode checar o status da sua aplicação pelo comando &lt;strong&gt;spring status&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Evite manter a aplicação em background por mais de 1 dia, pois o spring
não recarrega a aplicação de tempo em tempo, o que pode causar instabilidade em
specs que utilizam Date, Time, e DateTime. Neste caso utilize &lt;strong&gt;spring stop&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;links&quot;&gt;Links&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Guia de upgrade para Rails 4.1 - &lt;a href=&quot;http://edgeguides.rubyonrails.org/upgrading_ruby_on_rails.html#upgrading-from-rails-4-0-to-rails-4-1&quot;&gt;Link&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;Rails 4.1 Release Notes - &lt;a href=&quot;http://edgeguides.rubyonrails.org/4_1_release_notes.html&quot;&gt;Link&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Spring Gem - &lt;a href=&quot;https://github.com/rails/spring/&quot;&gt;Link&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


  &lt;p&gt;&lt;a href=&quot;http://oswaldoferreira.github.io/2014/05/26/melhorando-workflow-com-spring.html&quot;&gt;Melhorando seu workflow no Rails com Spring&lt;/a&gt; was originally published by Oswaldo Ferreira at &lt;a href=&quot;http://oswaldoferreira.github.io&quot;&gt;Developer's Brainstorming&lt;/a&gt; on May 26, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Criando e testando uma API básica no Rails]]></title>
  <link rel="alternate" type="text/html" href="http://oswaldoferreira.github.io/2014/05/09/criando-e-testando-uma-api-basica-em-rails.html" />
  <id>http://oswaldoferreira.github.io/2014/05/09/criando-e-testando-uma-api-basica-em-rails</id>
  <published>2014-05-09T00:00:00-04:00</published>
  <updated>2014-05-09T00:00:00-04:00</updated>
  <author>
    <name>Oswaldo Ferreira</name>
    <uri>http://oswaldoferreira.github.io</uri>
    <email>oswluizf@gmail.com</email>
  </author>
  <content type="html">&lt;h2 id=&quot;rails--http&quot;&gt;Rails &amp;amp; HTTP&lt;/h2&gt;

&lt;p&gt;O rails é uma poderosa framework que nos permite desenvolver de forma ágil e produtiva,
possibilitando foco no que realmente temos como fim, não como meio.&lt;/p&gt;

&lt;p&gt;Em vista disso, hoje iremos aprender como criar uma api simples para servir
dados de nossas aplicações no formato &lt;a href=&quot;http://pt.wikipedia.org/wiki/JSON&quot;&gt;JSON&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Partindo do princípio básico do &lt;a href=&quot;http://pt.wikipedia.org/wiki/Hypertext_Transfer_Protocol&quot;&gt;HTTP&lt;/a&gt;,
primeiramente precisamos de uma URL que responda à requisições &lt;em&gt;GET&lt;/em&gt;.&lt;/p&gt;

&lt;h2 id=&quot;routesrb&quot;&gt;routes.rb&lt;/h2&gt;

&lt;p&gt;Criando namespaces exclusivos para API nos ajudará a isolar comportamentos, direcionando para uma
controller que terá o papel único de retornar dados em &lt;em&gt;JSON&lt;/em&gt;. Neste caso estamos
direcionando para controller &lt;strong&gt;api/v1/users_controller.rb&lt;/strong&gt;.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;  &lt;span class=&quot;n&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:api&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:v1&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;users#index&amp;#39;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Output do &lt;strong&gt;rake routes&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;  api_v1_users GET  /api/v1/users&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;.:format&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; api/v1/users#index
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&quot;apiv1userscontrollerrb&quot;&gt;api/v1/users_controller.rb&lt;/h3&gt;

&lt;p&gt;Nossa controller neste momento terá apenas uma action (index), e esta irá responder
com todos os usuários de nossa aplicação.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Api&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;V1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;UsersController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ApplicationController&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;index&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@users&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;all&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;render&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@users&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&quot;specs&quot;&gt;Specs&lt;/h3&gt;

&lt;p&gt;Neste caso estamos testando se o resposta da requisição HTTP é 200 (success),
transformando o JSON em um Hash e validando seu retorno.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;describe&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Api&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;V1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;UsersController&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;GET index&amp;#39;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;it&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;when users&amp;#39;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create!&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;John&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;birthday&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;14/03/1991&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;index&amp;#39;&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;expect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;be_success&lt;/span&gt;

      &lt;span class=&quot;n&quot;&gt;json&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;expect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eq&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;John&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;birthday&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1991-03-14&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;it&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;when no users&amp;#39;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;index&amp;#39;&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;expect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;be_success&lt;/span&gt;

      &lt;span class=&quot;n&quot;&gt;json&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;expect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;be_empty&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Com apenas isso já temos o necessário para responder requisições GET com todos
objetos de usuários de nossa aplicação em formato &lt;em&gt;JSON&lt;/em&gt;, possibilitando
sua utilização por qualquer outra aplicação web.&lt;/p&gt;

&lt;h3 id=&quot;e-esse--o-fim-do-incio&quot;&gt;E esse é o fim do início.&lt;/h3&gt;

&lt;p&gt;Este é um caso super simples, e claro, podemos melhora-lo utilizando mais models e
autenticação/autorização com as gems Devise e Cancan, tornando sua API mais completa e segura.&lt;/p&gt;

&lt;p&gt;Em breve criarei um post mais completo e com mais exemplos, por enquanto ficamos por aqui..&lt;/p&gt;


  &lt;p&gt;&lt;a href=&quot;http://oswaldoferreira.github.io/2014/05/09/criando-e-testando-uma-api-basica-em-rails.html&quot;&gt;Criando e testando uma API básica no Rails&lt;/a&gt; was originally published by Oswaldo Ferreira at &lt;a href=&quot;http://oswaldoferreira.github.io&quot;&gt;Developer's Brainstorming&lt;/a&gt; on May 09, 2014.&lt;/p&gt;</content>
</entry>

</feed>
